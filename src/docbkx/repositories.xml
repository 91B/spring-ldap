<?xml version="1.0" encoding="UTF-8"?>
<chapter id="repositories">
    <title>Spring LDAP Repositories</title>

    <sect1 id="repositories-overview">
        <title>Overview</title>
        <para>
            Spring LDAP has built-in support for Spring Data repositories. The basic functionality and configuration is described <ulink
                url="http://docs.spring.io/spring-data/data-commons/docs/1.6.1.RELEASE/reference/html/repositories.html">here</ulink>.
            When working with Spring LDAP repositories, please note the following:
            <itemizedlist>
                <listitem>
                    Spring LDAP repositories can be enabled using an <literal>&lt;ldap:repositories&gt;</literal> tag in
                    your XML configuration or using an <literal>@EnableLdapRepositories</literal> annotation on a
                    configuration class.
                </listitem>
                <listitem>
                    To include support for <literal>LdapQuery</literal> parameters in automatically generated repositories,
                    have your interface extend <literal>LdapRepository</literal> rather than <literal>CrudRepository</literal>.
                </listitem>
                <listitem>
                    All Spring LDAP repositories must work with entities annotated with the ODM annotations, as described
                    in <xref linkend="odm" />.
                </listitem>
                <listitem>
                    Since all ODM managed classes must have a Distinguished Name as ID, all Spring LDAP repositories must
                    have the ID type parameter set to <literal>javax.naming.Name</literal>. Indeed, the built-in
                    <literal>SpringLdapRepository</literal> only takes one type parameter; the managed entity class, defaulting
                    ID to <literal>javax.naming.Name</literal>.
                </listitem>
                <listitem>
                    Due to specifics of the LDAP protocol, paging and sorting is not supported for Spring LDAP repositories.
                </listitem>
            </itemizedlist>
        </para>
    </sect1>
    <sect1 id="querydsl-repositories">
        <title>QueryDSL support</title>
        <para>
            Basic QueryDSL support is included in Spring LDAP. This support includes the following:
            <itemizedlist>
                <listitem>
                    An Annotation Processor, <literal>LdapAnnotationProcessor</literal>, for generating QueryDSL classes
                    based on Spring LDAP ODM annotations. See <xref linkend="odm" /> for more information on the ODM annotations.
                </listitem>
                <listitem>
                    A Query implementation, <literal>QueryDslLdapQuery</literal>, for building and executing QueryDSL
                    queries in code.
                </listitem>
                <listitem>
                    Spring Data repository support for QueryDSL predicates. <literal>QueryDslPredicateExecutor</literal>
                    includes a number of additional methods with appropriate parameters; extend this interface along with
                    <literal>LdapRepository</literal> to include this support in your repository.
                </listitem>
            </itemizedlist>
        </para>
    </sect1>
</chapter>
